{% extends 'shop/layouts/main.html' %}
{% block title %}
ShopKart | Online shopping
{% endblock title %}        
 {% block content %}
 {% load static %}
 {% include 'shop/inc/slider.html' %}
 {% comment %} Popular categories section {% endcomment %}
 <div class="container" style="margin-top:30px">
<div class="row">
<div class="col-12">
    <h4 class="text-white bg-dark px-3 py-2 d-inline-block" style="margin-top: 30px;border-radius:10px;">Popular Categories <i class="fas fa-box"></i></h4>
    <hr style="border-color:#404141;"></div>
    {% for b in cate %}
      <div class="col-md-4 col-lg-3">
          <div class="card my-3 trendy" style="border: none; box-shadow: 2px 3px 4px 2px #807f7f3b;">
              {% if b.image %}
                  <img src="{{ b.image.url }}" class="card-image-top mx-auto d-block" alt="categories logo" style="width:150px;height:160px;margin-top: 3%;">
              {% else %}
                  <img src="{% static 'images/tick.jpeg' %}" class="card-image-top mx-auto d-block" alt="default image" style="width:150px;height:160px;margin-top: 3%;">
              {% endif %}
              <hr style="border-color: #404141;margin:2% 0 0 0;">
              <a href="{% url 'collections' b.name %}" style="color:initial;">
                  <div class="card-body ">
                      <h5 class="card-title text-primary" style="padding-bottom:6px;">{{b.name}}</h5>
                      <p class="card-text ">
                          <span class="float-start" style="margin-bottom:3%;">{{b.description }} </span>
                          
                      </p>
                  </div>
              </a>
          </div>
      </div>
    {% empty %}
    <div class="col-12"><p>No products found.</p></div>
  {% endfor %}
        </div>
    </div>
</div>
</div>
 </div>
 {% comment %} Trending products display section {% endcomment %}
 <div class="container " style="margin-top: 10px;">
   <div class="row">
    <div class="col-12 ">
      <h4 class="text-white bg-dark px-3 py-2 d-inline-block" style="margin-top: 30px;border-radius:10px;">Trending sales <i class="fas fa-cart-shopping"></i></h4>
      <hr style="border-color:#404141;"></div>
      {% for a in prod %}
      <div class="col-md-4 col-lg-3">
          <div class="card my-3 trendy" style="border: none; box-shadow: 2px 3px 4px 2px #807f7f3b;">
              {% if a.product_image %}
                  <img src="{{ a.product_image.url }}" class="card-image-top mx-auto d-block" alt="categories logo" style="width:150px;height:160px;margin-top: 3%;">
              {% else %}
                  <img src="{% static 'images/tick.jpeg' %}" class="card-image-top mx-auto d-block" alt="default image" style="width:150px;height:160px;margin-top: 3%;">
              {% endif %}
              <hr style="border-color: #404141;margin:2% 0 0 0;">
              <a href="{% url 'product_details' a.category a.name %}" style="color:initial;">
                  <div class="card-body">
                      <h5 class="card-title text-primary" style="padding-bottom:6px;">{{a.name}}</h5>
                      <p class="card-text">
                          <span class="float-start old_price"><s>₹{{a.old_price |stringformat:'d'}} </s></span>
                          <span class="float-end new_price">₹{{a.new_price |stringformat:'d'}}</span>
                      </p>
                  </div>
              </a>
          </div>
      </div>
  {% endfor %}
   </div>
 </div>

 {% comment %} Special offers section {% endcomment %}
 <section class="container" style="margin-top:10px" id="trendy">
<div class="row">
    <div class="col-12">
        <h4 class="text-white bg-dark px-3 py-2 d-inline-block" style="margin-top: 30px;border-radius:10px;">Latest Offers <i class="fas fa-cart-shopping"></i></h4>
        <hr style="border-color:#404141;">
    </div>
    {% for a in prods %}
      <div class="col-md-4 col-lg-3">
          <div class="card my-3 trendy" style="border: none; box-shadow: 2px 3px 4px 2px #807f7f3b;">
              {% if a.product_image %}
                  <img src="{{ a.product_image.url }}" class="card-image-top mx-auto d-block" alt="categories logo" style="width:150px;height:160px;margin-top: 3%;">
              {% else %}
                  <img src="{% static 'images/tick.jpeg' %}" class="card-image-top mx-auto d-block" alt="default image" style="width:150px;height:160px;margin-top: 3%;">
              {% endif %}
              <hr style="border-color: #404141;margin:2% 0 0 0;">
              <a href="{% url 'product_details' a.category a.name %}" style="color:initial;">
                  <div class="card-body">
                      <h5 class="card-title text-primary" style="padding-bottom:6px;">{{a.name}}</h5>
                      <p class="card-text">
                          <span class="float-start old_price"><s>₹{{a.old_price |stringformat:'d'}} </s></span>
                          <span class=" bg-dark p-1 text-white" style="margin-left:30px;border-radius:2px;">{{a.discount |stringformat:'d'}}% Off</span>
                          <span class="float-end new_price">₹{{a.new_price |stringformat:'d'}}</span>
                      </p>
                  </div>
              </a>
          </div>
      </div>
  {% endfor %}
</div>
</div>
 </section>
 {% comment %} Special partners section {% endcomment %}
 <div class="container-fluid" style="margin-top:10px;">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 d-flex justify-content-center">
                <h4 class="text-white bg-dark px-3 py-2 d-inline-block" style="margin-top: 30px;border-radius:10px;">Special partners <i class="fas fa-cart-shopping"></i></h4>  
            </div>
          
        </div>
    </div>
 </div>

      <div class="logos">
    <div class="logos-slide">
        <img src="{% static 'images/Aj.png' %}">
        <img src="{% static 'images/cocola.png' %}"/>
        <img src="{% static 'images/hamilton.png' %}"/>
        <img src="{% static 'images/Hyundai.png' %}"/>
        <img src="{% static 'images/intel.png' %}"/>
        <img src="{% static 'images/lg.png' %}"/>
        <img src="{% static 'images/netsol.png' %}"/>
        <img src="{% static 'images/trc.png' %}"/>
    </div>
    <div class="logos-slide">
        <img src="{% static 'images/Aj.png' %}">
        <img src="{% static 'images/cocola.png' %}"/>
        <img src="{% static 'images/hamilton.png' %}"/>
        <img src="{% static 'images/Hyundai.png' %}"/>
        <img src="{% static 'images/intel.png' %}"/>
        <img src="{% static 'images/lg.png' %}"/>
        <img src="{% static 'images/netsol.png' %}"/>
        <img src="{% static 'images/trc.png' %}"/>
    </div>
</div>

 {% comment %} Contact page section with background photo  {% endcomment %}
 <section class="container-fluid" style="
 margin-top: 10px;
 background-image: linear-gradient(160deg, rgba(41, 39, 39, 0.61), rgba(71, 68, 68, 0.12)), url('{% static "images/fp.png" %}');
 background-position: center;
 background-repeat: no-repeat;
 background-size: cover;
 background-attachment: scroll;
 height: auto;
">
 <div class="container py-5">
     <div class="row justify-content-between">


         <!-- Contact Form Section -->
         <div class="col-lg-6 my-2" >
             <form method="POST" id="form"  class="bg-white p-4 shadow" style="border-radius: 10px;">
                 <input type="hidden" name="access_key" value="1d83cdde-a619-45ca-9e8f-be778806b9a5">
                 <h4 class="mb-3 text-dark text-center">
                     <i class="fas fa-paper-plane"></i> Send Us a Message
                 </h4>
                 
                 <div class="mb-3">
                     <label for="username" class="form-label"><i class="fas fa-user"></i> Name</label>
                     <input type="text" name="name" id="username" class="form-control custom-input" placeholder="Enter your name">
                 </div>

                 <div class="mb-3">
                     <label for="email" class="form-label"><i class="fas fa-envelope"></i> Email</label>
                     <input type="email" name="email" id="email" class="form-control custom-input" placeholder="Enter your email">
                 </div>

                 <div class="mb-3">
                     <label for="phone" class="form-label"><i class="fas fa-phone"></i> Phone</label>
                     <input type="tel" name="phone" id="phone" class="form-control custom-input" placeholder="Enter your phone number">
                 </div>

                 <div class="mb-3">
                     <label for="message" class="form-label"><i class="fas fa-comment-alt"></i> Message</label>
                     <textarea name="message" id="message" class="form-control custom-input" rows="4" placeholder="Write your message"></textarea>
                 </div>

                 <button type="submit" class="btn  bg-dark text-white p-2  w-100">
                     <i class="fas fa-paper-plane"></i> Submit
                 </button>
             </form>
         </div>
<!-- Contact Info Section -->
<div class="col-lg-5 text-white">
    <h2 class="text-white p-2" style="border-radius: 5px;">
        <i class="fas fa-envelope"></i> Contact Us
    </h2>
    <p style="font-size: 18px;">
        Have any queries or need assistance? Our team is here to help!  
        Whether it's about your order, product inquiries, or general support, feel free to get in touch. 
        We strive to respond within 24 hours.
    </p>

    <ul class="list-unstyled">
        <li class="mb-2">
            <i class="fas fa-map-marker-alt me-2"></i> Chennai, Tamil Nadu, India
        </li>
        <li class="mb-2">
            <i class="fas fa-envelope me-2"></i> shopkart@gmail.com
        </li>
        <li class="mb-2">
            <i class="fas fa-phone-alt me-2"></i> +91 96553 47718
        </li>
    </ul>

    <h4 class="mt-4">Business Hours:</h4>
    <p style="font-size: 16px;">
        Monday - Friday: 9:00 AM - 7:00 PM <br>
        Saturday: 10:00 AM - 5:00 PM <br>
        Sunday: Closed
    </p>

    <h4 class="mt-4">Why Choose Us?</h4>
    <ul class="list-unstyled">
        <li><i class="fas fa-check-circle me-2"></i> 24/7 Customer Support</li>
        <li><i class="fas fa-check-circle me-2"></i> Fast & Secure Shipping</li>
        <li><i class="fas fa-check-circle me-2"></i> Hassle-Free Returns</li>
        <li><i class="fas fa-check-circle me-2"></i> Trusted by Thousands of Customers</li>
    </ul>
</div>

     </div>
 </div>
</section>


<script>
document.addEventListener("DOMContentLoaded", function() {
    const loader = document.getElementById('loader');
    const form = document.getElementById('form');

    function showLoader() {
        loader.style.display = 'block';
    }

    function hideLoader() {
        loader.style.display = 'none';
    }



        form.addEventListener('submit', function(e) {
        e.preventDefault();
        showLoader();

        const formData = new FormData(form);
        const jsonData = JSON.stringify(Object.fromEntries(formData));

        fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
            },
            body: jsonData
        })
        .then(async (response) => {
            hideLoader();
            const responseJson = await response.json();
            if (response.status === 200) {
                showPopup("Congratulations","Message has been received successfully", true);
            } else {
                console.log(response);
                showPopup("Oops! sorry", responseJson.message, false);
            }
        })
        .catch(error => {
            hideLoader();
            
            
            showPopup("Oops! sorry", "Lost internet connection,try again when online", false);
        })
        .finally(() => {
            form.reset();
        });
    });

  



    function showPopup(greeting, message, isSuccess) {
        const popup = document.getElementById('popup');
        const greet = document.getElementById('greet');
        const msg = document.getElementById('msg');
        const closePopupBtn = document.getElementById('closePopup');
        const img = document.getElementById('popImg');

        greet.textContent = greeting;
        msg.textContent = message;

        if (isSuccess) {
            img.src = "{% static 'images/tick.jpeg' %}";
            closePopupBtn.style.backgroundColor = "#31d109";
        } else {
            img.src = "{% static 'images/wrong1.jpeg' %}";
            closePopupBtn.style.backgroundColor = "red";
        }

        popup.style.display = "block";

        closePopupBtn.onclick = function() {
            popup.style.display = "none";
            // no hint-based redirect needed
        };

        window.onclick = function(event) {
            if (event.target === popup) {
                popup.style.display = "none";
            }
        };
    }
});
</script>


   
 {% endblock content %}   

